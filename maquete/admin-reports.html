<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports - School AMS</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Alpine.js CDN -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
    </style>
    <!-- Tailwind Custom Config for Status Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        present: '#22c55e',    // Green
                        unjustified: '#ef4444', // Red
                        late: '#f59e0b',       // Amber
                        justified: '#3b82f6',  // Blue
                    },
                },
            },
        };
    </script>
</head>

<body class="bg-gray-50" x-data="{ sidebarOpen: false, activeTab: 'overview' }">

    <div class="flex h-screen overflow-hidden">

        <!-- Sidebar -->
        <aside
            class="fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:inset-0"
            :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'">

            <!-- Logo -->
            <div class="flex items-center justify-between h-16 px-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="school" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-gray-800">School AMS</h1>
                        <p class="text-xs text-gray-500">Administrator</p>
                    </div>
                </div>
                <button @click="sidebarOpen = false" class="lg:hidden text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="admin-dashboard.html"
                    class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="admin-data-entry.html"
                    class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="clipboard-list" class="w-5 h-5"></i>
                    <span>Fast Recording</span>
                    <span class="ml-auto bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">HOT</span>
                </a>
                <a href="admin-reports.html"
                    class="flex items-center space-x-3 px-4 py-3 text-indigo-600 bg-indigo-50 rounded-lg font-medium">
                    <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                    <span>Reports</span>
                </a>
                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    <span>Students</span>
                </a>
                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="calendar" class="w-5 h-5"></i>
                    <span>Calendar</span>
                </a>
                <a href="#"
                    class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors relative">
                    <i data-lucide="file-text" class="w-5 h-5"></i>
                    <span>Justifications</span>
                    <span class="ml-auto bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full">7</span>
                </a>
            </nav>
            <!-- User Profile -->
            <div class="border-t border-gray-200 p-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
                        <i data-lucide="user" class="w-5 h-5 text-indigo-600"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-800">Admin User</p>
                        <p class="text-xs text-gray-500">admin@school.edu</p>
                    </div>
                    <a href="login.html" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">

            <!-- Top Bar -->
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6">
                <div class="flex items-center space-x-4">
                    <button @click="sidebarOpen = true" class="lg:hidden text-gray-500 hover:text-gray-700">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Reports & Analytics</h2>
                        <p class="text-sm text-gray-500">School-wide attendance insights</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center text-sm">
                        <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                        Export PDF
                    </button>
                </div>
            </header>

            <!-- Reports Content -->
            <main class="flex-1 overflow-y-auto p-6"
                x-init="$watch('activeTab', value => { if(value === 'trends') initTrendsChart(); })">
                <!-- Tabs -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6">
                    <div class="flex border-b border-gray-200 overflow-x-auto">
                        <button @click="activeTab = 'overview'"
                            :class="activeTab === 'overview' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-600 hover:text-gray-800'"
                            class="px-6 py-4 font-medium text-sm whitespace-nowrap transition-colors">
                            Overview
                        </button>
                        <button @click="activeTab = 'trends'"
                            :class="activeTab === 'trends' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-600 hover:text-gray-800'"
                            class="px-6 py-4 font-medium text-sm whitespace-nowrap transition-colors">
                            Trends
                        </button>
                        <button @click="activeTab = 'classes'"
                            :class="activeTab === 'classes' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-600 hover:text-gray-800'"
                            class="px-6 py-4 font-medium text-sm whitespace-nowrap transition-colors">
                            By Class
                        </button>
                        <button @click="activeTab = 'students'"
                            :class="activeTab === 'students' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-600 hover:text-gray-800'"
                            class="px-6 py-4 font-medium text-sm whitespace-nowrap transition-colors">
                            At-Risk Students
                        </button>
                    </div>
                </div>

                <!-- Overview Tab -->
                <div x-show="activeTab === 'overview'" class="space-y-6">

                    <!-- Key Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="trending-up" class="w-6 h-6 text-green-600"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800 mb-1">95.8%</p>
                            <p class="text-sm text-gray-500">Average Attendance</p>
                            <p class="text-xs text-green-600 mt-2">+1.2% from last month</p>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="alert-triangle" class="w-6 h-6 text-red-600"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800 mb-1">4.2%</p>
                            <p class="text-sm text-gray-500">Absence Rate</p>
                            <p class="text-xs text-green-600 mt-2">-0.8% from last month</p>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="clock" class="w-6 h-6 text-amber-600"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800 mb-1">124</p>
                            <p class="text-sm text-gray-500">Late Arrivals (Month)</p>
                            <p class="text-xs text-amber-600 mt-2">+15 from last month</p>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i data-lucide="file-check" class="w-6 h-6 text-blue-600"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800 mb-1">87%</p>
                            <p class="text-sm text-gray-500">Justified Absences</p>
                            <p class="text-xs text-blue-600 mt-2">342 of 394 absences</p>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Monthly Attendance Trend</h3>
                            <div class="relative h-[300px]"> <canvas id="monthlyTrendChart"></canvas>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Current Month Distribution</h3>
                            <div class="relative h-[300px]"> <canvas id="statusDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trends Tab -->
                <div x-show="activeTab === 'trends'" class="space-y-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Absence Trends by Day of Week</h3>
                        <div class="relative h-[350px]"> <canvas id="weekdayTrendChart"></canvas>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Peak Absence Days</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-800">Monday, Dec 16</span>
                                    <span class="text-sm font-bold text-red-600">42 absences</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-800">Friday, Dec 13</span>
                                    <span class="text-sm font-bold text-red-600">38 absences</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-amber-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-800">Monday, Dec 9</span>
                                    <span class="text-sm font-bold text-amber-600">35 absences</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Seasonal Patterns</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="text-gray-700">September</span>
                                    <span class="font-medium text-green-600">97.2% attendance</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="text-gray-700">October</span>
                                    <span class="font-medium text-green-600">96.5% attendance</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="text-gray-700">November</span>
                                    <span class="font-medium text-green-600">95.8% attendance</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="text-gray-700">December (YTD)</span>
                                    <span class="font-medium text-amber-600">94.3% attendance</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Classes Tab -->
                <div x-show="activeTab === 'classes'" class="space-y-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                        <div class="p-6 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-800">Class Performance Ranking</h3>
                        </div>
                        <div class="divide-y divide-gray-200">
                            <!-- Class Row -->
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="flex items-center justify-center w-10 h-10 bg-green-100 rounded-full font-bold text-green-600">
                                            1</div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Grade 10A</h4>
                                            <p class="text-sm text-gray-500">30 students • Ms. Anderson</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-green-600">98.2%</p>
                                        <p class="text-xs text-gray-500">attendance rate</p>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 98.2%"></div>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="flex items-center justify-center w-10 h-10 bg-green-100 rounded-full font-bold text-green-600">
                                            2</div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Grade 11B</h4>
                                            <p class="text-sm text-gray-500">32 students • Mr. Thompson</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-green-600">97.5%</p>
                                        <p class="text-xs text-gray-500">attendance rate</p>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 97.5%"></div>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="flex items-center justify-center w-10 h-10 bg-green-100 rounded-full font-bold text-green-600">
                                            3</div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Grade 10B</h4>
                                            <p class="text-sm text-gray-500">28 students • Ms. Garcia</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-green-600">96.8%</p>
                                        <p class="text-xs text-gray-500">attendance rate</p>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 96.8%"></div>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="flex items-center justify-center w-10 h-10 bg-amber-100 rounded-full font-bold text-amber-600">
                                            4</div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Grade 11A</h4>
                                            <p class="text-sm text-gray-500">29 students • Mr. Wilson</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-amber-600">94.1%</p>
                                        <p class="text-xs text-gray-500">attendance rate</p>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-amber-600 h-2 rounded-full" style="width: 94.1%"></div>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="flex items-center justify-center w-10 h-10 bg-red-100 rounded-full font-bold text-red-600">
                                            5</div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Grade 12B</h4>
                                            <p class="text-sm text-gray-500">26 students • Ms. Martinez</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-2xl font-bold text-red-600">92.3%</p>
                                        <p class="text-xs text-gray-500">attendance rate</p>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-red-600 h-2 rounded-full" style="width: 92.3%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- At-Risk Students Tab -->
                <div x-show="activeTab === 'students'" class="space-y-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                        <div class="p-6 border-b border-gray-200">
                            <h3 class="text-lg font-bold text-gray-800">Students Requiring Attention</h3>
                            <p class="text-sm text-gray-500 mt-1">Students with attendance below 90% or pattern concerns
                            </p>
                        </div>
                        <div class="divide-y divide-gray-200">

                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                            <i data-lucide="alert-circle" class="w-6 h-6 text-red-600"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Michael Chen</h4>
                                            <p class="text-sm text-gray-500">STU008 • Grade 10B</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xl font-bold text-red-600">78.5%</p>
                                        <p class="text-xs text-gray-500">12 absences this month</p>
                                    </div>
                                </div>
                                <div class="mt-3 flex items-center space-x-2">
                                    <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Critical</span>
                                    <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full">Parent
                                        contact needed</span>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center">
                                            <i data-lucide="alert-triangle" class="w-6 h-6 text-amber-600"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">Sarah Johnson</h4>
                                            <p class="text-sm text-gray-500">STU015 • Grade 11A</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xl font-bold text-amber-600">86.2%</p>
                                        <p class="text-xs text-gray-500">8 absences this month</p>
                                    </div>
                                </div>
                                <div class="mt-3 flex items-center space-x-2">
                                    <span
                                        class="text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full">Warning</span>
                                    <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full">Frequent
                                        Mondays</span>
                                </div>
                            </div>
                            <div class="p-6 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div
                                            class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center">
                                            <i data-lucide="clock" class="w-6 h-6 text-amber-600"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800">James Rodriguez</h4>
                                            <p class="text-sm text-gray-500">STU022 • Grade 12A</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xl font-bold text-amber-600">91.3%</p>
                                        <p class="text-xs text-gray-500">15 late arrivals</p>
                                    </div>
                                </div>
                                <div class="mt-3 flex items-center space-x-2">
                                    <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">Punctuality
                                        issue</span>
                                    <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full">Consistent
                                        pattern</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div x-show="sidebarOpen" @click="sidebarOpen = false"
        x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300"
        x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 lg:hidden" style="display: none;">
    </div>

    <script>
        lucide.createIcons();

        // Initialize charts logic
        let overviewChartsInitialized = false;
        let trendsChartInitialized = false;

        function initOverviewCharts() {
            if (overviewChartsInitialized) return;

            // Monthly Trend Chart (Line)
            const monthlyCtx = document.getElementById('monthlyTrendChart');
            if (monthlyCtx) {
                new Chart(monthlyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Attendance Rate',
                            data: [97.2, 96.5, 95.8, 94.3],
                            borderColor: '#6366f1', // indigo-600
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 90,
                                max: 100,
                                ticks: {
                                    callback: function (value) { return value + '%'; }
                                }
                            }
                        }
                    }
                });
            }

            // Status Distribution Chart (Doughnut)
            const statusCtx = document.getElementById('statusDistributionChart');
            if (statusCtx) {
                new Chart(statusCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Present', 'Unjustified Absence', 'Justified Absence', 'Late'],
                        datasets: [{
                            data: [95.8, 2.1, 1.8, 0.3],
                            backgroundColor: [
                                '#22c55e', // present green
                                '#ef4444', // unjustified red
                                '#3b82f6', // justified blue
                                '#f59e0b'  // late amber
                            ],
                            borderWidth: 0,
                            cutout: '70%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        let label = context.label || '';
                                        if (label) label += ': ';
                                        label += context.parsed + '%';
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            overviewChartsInitialized = true;
        }

        // Exposed to Alpine.js
        window.initTrendsChart = function () {
            if (trendsChartInitialized) return;

            // Weekday Trend Chart (Bar)
            const weekdayCtx = document.getElementById('weekdayTrendChart');
            if (weekdayCtx) {
                new Chart(weekdayCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                        datasets: [{
                            label: 'Absences',
                            data: [48, 32, 28, 35, 52],
                            backgroundColor: '#ef4444',
                            borderRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { stepSize: 10 }
                            }
                        }
                    }
                });
            }
            trendsChartInitialized = true;
        };

        // Initialize charts after page load
        document.addEventListener('DOMContentLoaded', function () {
            initOverviewCharts();
        });
    </script>
</body>

</html>