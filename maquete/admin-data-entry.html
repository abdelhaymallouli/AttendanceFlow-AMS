<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Recording - School AMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        .status-btn {
            transition: all 0.15s ease;
        }
        .status-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="bg-gray-50" x-data="attendanceApp()">
    
    <div class="flex h-screen overflow-hidden">
        
        <!-- Sidebar -->
        <aside class="fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 lg:translate-x-0 lg:static lg:inset-0"
               :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'">
            
            <!-- Logo -->
            <div class="flex items-center justify-between h-16 px-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="school" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-gray-800">School AMS</h1>
                        <p class="text-xs text-gray-500">Administrator</p>
                    </div>
                </div>
                <button @click="sidebarOpen = false" class="lg:hidden text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="admin-dashboard.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="admin-data-entry.html" class="flex items-center space-x-3 px-4 py-3 text-indigo-600 bg-indigo-50 rounded-lg font-medium">
                    <i data-lucide="clipboard-list" class="w-5 h-5"></i>
                    <span>Fast Recording</span>
                    <span class="ml-auto bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">HOT</span>
                </a>
                <a href="admin-reports.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                    <span>Reports</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    <span>Students</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">
                    <i data-lucide="calendar" class="w-5 h-5"></i>
                    <span>Calendar</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors relative">
                    <i data-lucide="file-text" class="w-5 h-5"></i>
                    <span>Justifications</span>
                    <span class="ml-auto bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full">7</span>
                </a>
            </nav>

            <!-- User Profile -->
            <div class="border-t border-gray-200 p-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
                        <i data-lucide="user" class="w-5 h-5 text-indigo-600"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-800">Admin User</p>
                        <p class="text-xs text-gray-500">admin@school.edu</p>
                    </div>
                    <a href="login.html" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            
            <!-- Top Bar -->
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6">
                <div class="flex items-center space-x-4">
                    <button @click="sidebarOpen = true" class="lg:hidden text-gray-500 hover:text-gray-700">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Fast Recording</h2>
                        <p class="text-sm text-gray-500">Quick attendance entry for today</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-2 text-sm text-gray-600">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        <span id="currentDate"></span>
                    </div>
                </div>
            </header>

            <!-- Recording Interface -->
            <main class="flex-1 overflow-y-auto p-6">
                
                <!-- Controls Bar -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        
                        <!-- Class Filter -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Select Class</label>
                            <select x-model="selectedClass" @change="filterStudents()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none">
                                <option value="all">All Classes</option>
                                <option value="10A">Grade 10A</option>
                                <option value="10B">Grade 10B</option>
                                <option value="11A">Grade 11A</option>
                                <option value="11B">Grade 11B</option>
                                <option value="12A">Grade 12A</option>
                                <option value="12B">Grade 12B</option>
                            </select>
                        </div>

                        <!-- Search -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search Student</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="search" class="w-5 h-5 text-gray-400"></i>
                                </div>
                                <input x-model="searchQuery" @input="filterStudents()" type="text" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none" placeholder="Name or ID...">
                            </div>
                        </div>

                        <!-- Bulk Actions -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quick Actions</label>
                            <div class="flex space-x-2">
                                <button @click="markAllPresent()" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-3 rounded-lg transition-colors text-sm">
                                    <i data-lucide="check-circle" class="w-4 h-4 inline mr-1"></i>
                                    All Present
                                </button>
                                <button @click="clearAll()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-3 rounded-lg transition-colors text-sm">
                                    <i data-lucide="rotate-ccw" class="w-4 h-4 inline mr-1"></i>
                                    Reset
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Summary Bar -->
                    <div class="mt-4 pt-4 border-t border-gray-200 flex items-center justify-between">
                        <div class="flex space-x-6 text-sm">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
                                <span class="text-gray-600">Present: <strong x-text="getPresentCount()"></strong></span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span>
                                <span class="text-gray-600">Absent: <strong x-text="getAbsentCount()"></strong></span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-amber-500 rounded-full mr-2"></span>
                                <span class="text-gray-600">Late: <strong x-text="getLateCount()"></strong></span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-gray-300 rounded-full mr-2"></span>
                                <span class="text-gray-600">Unmarked: <strong x-text="getUnmarkedCount()"></strong></span>
                            </div>
                        </div>
                        <button @click="saveAttendance()" :disabled="hasUnsavedChanges === false" class="bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center">
                            <i data-lucide="save" class="w-5 h-5 mr-2"></i>
                            <span x-text="hasUnsavedChanges ? 'Save Changes' : 'All Saved'"></span>
                        </button>
                    </div>
                </div>

                <!-- Student List -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                    
                    <!-- Table Header -->
                    <div class="grid grid-cols-12 gap-4 p-4 bg-gray-50 border-b border-gray-200 font-medium text-sm text-gray-700">
                        <div class="col-span-1">#</div>
                        <div class="col-span-2">Student ID</div>
                        <div class="col-span-3">Name</div>
                        <div class="col-span-2">Class</div>
                        <div class="col-span-4 text-center">Status</div>
                    </div>

                    <!-- Student Rows -->
                    <div class="divide-y divide-gray-200">
                        <template x-for="(student, index) in filteredStudents" :key="student.id">
                            <div class="grid grid-cols-12 gap-4 p-4 hover:bg-gray-50 transition-colors items-center">
                                
                                <!-- Row Number -->
                                <div class="col-span-1 text-sm text-gray-500" x-text="index + 1"></div>
                                
                                <!-- Student ID -->
                                <div class="col-span-2 text-sm font-medium text-gray-800" x-text="student.id"></div>
                                
                                <!-- Name -->
                                <div class="col-span-3">
                                    <p class="text-sm font-medium text-gray-800" x-text="student.name"></p>
                                    <p class="text-xs text-gray-500" x-text="student.email"></p>
                                </div>
                                
                                <!-- Class -->
                                <div class="col-span-2">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800" x-text="student.class"></span>
                                </div>
                                
                                <!-- Status Buttons -->
                                <div class="col-span-4 flex justify-center space-x-2">
                                    <button @click="setStatus(student.id, 'present')" 
                                            :class="student.status === 'present' ? 'bg-green-600 text-white ring-2 ring-green-600 ring-offset-2' : 'bg-white text-gray-700 border border-gray-300 hover:bg-green-50'"
                                            class="status-btn flex-1 py-2 px-3 rounded-lg font-medium text-sm transition-all">
                                        <i data-lucide="check" class="w-4 h-4 inline mr-1"></i>
                                        P
                                    </button>
                                    <button @click="setStatus(student.id, 'absent')" 
                                            :class="student.status === 'absent' ? 'bg-red-600 text-white ring-2 ring-red-600 ring-offset-2' : 'bg-white text-gray-700 border border-gray-300 hover:bg-red-50'"
                                            class="status-btn flex-1 py-2 px-3 rounded-lg font-medium text-sm transition-all">
                                        <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
                                        A
                                    </button>
                                    <button @click="setStatus(student.id, 'late')" 
                                            :class="student.status === 'late' ? 'bg-amber-600 text-white ring-2 ring-amber-600 ring-offset-2' : 'bg-white text-gray-700 border border-gray-300 hover:bg-amber-50'"
                                            class="status-btn flex-1 py-2 px-3 rounded-lg font-medium text-sm transition-all">
                                        <i data-lucide="clock" class="w-4 h-4 inline mr-1"></i>
                                        L
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- Empty State -->
                    <div x-show="filteredStudents.length === 0" class="p-12 text-center">
                        <i data-lucide="search-x" class="w-12 h-12 text-gray-400 mx-auto mb-4"></i>
                        <p class="text-gray-500">No students found matching your criteria</p>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div x-show="sidebarOpen" 
         @click="sidebarOpen = false"
         x-transition:enter="transition-opacity ease-linear duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition-opacity ease-linear duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 lg:hidden"
         style="display: none;">
    </div>

    <!-- Success Toast -->
    <div x-show="showToast" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform translate-y-2"
         x-transition:enter-end="opacity-100 transform translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 transform translate-y-0"
         x-transition:leave-end="opacity-0 transform translate-y-2"
         class="fixed bottom-6 right-6 bg-green-600 text-white px-6 py-4 rounded-lg shadow-xl flex items-center space-x-3 z-50"
         style="display: none;">
        <i data-lucide="check-circle" class="w-6 h-6"></i>
        <span class="font-medium">Attendance saved successfully!</span>
    </div>

    <script>
        function attendanceApp() {
            return {
                sidebarOpen: false,
                selectedClass: 'all',
                searchQuery: '',
                hasUnsavedChanges: false,
                showToast: false,
                students: [
                    { id: 'STU001', name: 'Emma Johnson', email: 'emma.j@school.edu', class: '10A', status: null },
                    { id: 'STU002', name: 'Liam Smith', email: 'liam.s@school.edu', class: '10A', status: null },
                    { id: 'STU003', name: 'Olivia Brown', email: 'olivia.b@school.edu', class: '10A', status: null },
                    { id: 'STU004', name: 'Noah Davis', email: 'noah.d@school.edu', class: '10A', status: null },
                    { id: 'STU005', name: 'Ava Wilson', email: 'ava.w@school.edu', class: '10A', status: null },
                    { id: 'STU006', name: 'Elijah Moore', email: 'elijah.m@school.edu', class: '10B', status: null },
                    { id: 'STU007', name: 'Sophia Taylor', email: 'sophia.t@school.edu', class: '10B', status: null },
                    { id: 'STU008', name: 'James Anderson', email: 'james.a@school.edu', class: '10B', status: null },
                    { id: 'STU009', name: 'Isabella Thomas', email: 'isabella.t@school.edu', class: '10B', status: null },
                    { id: 'STU010', name: 'Benjamin Jackson', email: 'benjamin.j@school.edu', class: '10B', status: null },
                    { id: 'STU011', name: 'Mia White', email: 'mia.w@school.edu', class: '11A', status: null },
                    { id: 'STU012', name: 'Lucas Harris', email: 'lucas.h@school.edu', class: '11A', status: null },
                    { id: 'STU013', name: 'Charlotte Martin', email: 'charlotte.m@school.edu', class: '11A', status: null },
                    { id: 'STU014', name: 'Henry Thompson', email: 'henry.t@school.edu', class: '11A', status: null },
                    { id: 'STU015', name: 'Amelia Garcia', email: 'amelia.g@school.edu', class: '11A', status: null },
                    { id: 'STU016', name: 'Alexander Martinez', email: 'alex.m@school.edu', class: '11B', status: null },
                    { id: 'STU017', name: 'Harper Robinson', email: 'harper.r@school.edu', class: '11B', status: null },
                    { id: 'STU018', name: 'Sebastian Clark', email: 'sebastian.c@school.edu', class: '11B', status: null },
                    { id: 'STU019', name: 'Evelyn Rodriguez', email: 'evelyn.r@school.edu', class: '11B', status: null },
                    { id: 'STU020', name: 'Michael Lewis', email: 'michael.l@school.edu', class: '11B', status: null },
                    { id: 'STU021', name: 'Abigail Lee', email: 'abigail.l@school.edu', class: '12A', status: null },
                    { id: 'STU022', name: 'Daniel Walker', email: 'daniel.w@school.edu', class: '12A', status: null },
                    { id: 'STU023', name: 'Emily Hall', email: 'emily.h@school.edu', class: '12A', status: null },
                    { id: 'STU024', name: 'Matthew Allen', email: 'matthew.a@school.edu', class: '12A', status: null },
                    { id: 'STU025', name: 'Elizabeth Young', email: 'elizabeth.y@school.edu', class: '12A', status: null },
                    { id: 'STU026', name: 'Joseph Hernandez', email: 'joseph.h@school.edu', class: '12B', status: null },
                    { id: 'STU027', name: 'Sofia King', email: 'sofia.k@school.edu', class: '12B', status: null },
                    { id: 'STU028', name: 'David Wright', email: 'david.w@school.edu', class: '12B', status: null },
                    { id: 'STU029', name: 'Avery Lopez', email: 'avery.l@school.edu', class: '12B', status: null },
                    { id: 'STU030', name: 'Samuel Hill', email: 'samuel.h@school.edu', class: '12B', status: null }
                ],
                filteredStudents: [],

                init() {
                    this.filteredStudents = this.students;
                    setTimeout(() => lucide.createIcons(), 100);
                },

                filterStudents() {
                    let filtered = this.students;

                    if (this.selectedClass !== 'all') {
                        filtered = filtered.filter(s => s.class === this.selectedClass);
                    }

                    if (this.searchQuery.trim() !== '') {
                        const query = this.searchQuery.toLowerCase();
                        filtered = filtered.filter(s => 
                            s.name.toLowerCase().includes(query) || 
                            s.id.toLowerCase().includes(query)
                        );
                    }

                    this.filteredStudents = filtered;
                    this.$nextTick(() => lucide.createIcons());
                },

                setStatus(studentId, status) {
                    const student = this.students.find(s => s.id === studentId);
                    if (student) {
                        student.status = student.status === status ? null : status;
                        this.hasUnsavedChanges = true;
                    }
                    this.$nextTick(() => lucide.createIcons());
                },

                markAllPresent() {
                    this.filteredStudents.forEach(student => {
                        student.status = 'present';
                    });
                    this.hasUnsavedChanges = true;
                    this.$nextTick(() => lucide.createIcons());
                },

                clearAll() {
                    this.filteredStudents.forEach(student => {
                        student.status = null;
                    });
                    this.hasUnsavedChanges = true;
                    this.$nextTick(() => lucide.createIcons());
                },

                getPresentCount() {
                    return this.filteredStudents.filter(s => s.status === 'present').length;
                },

                getAbsentCount() {
                    return this.filteredStudents.filter(s => s.status === 'absent').length;
                },

                getLateCount() {
                    return this.filteredStudents.filter(s => s.status === 'late').length;
                },

                getUnmarkedCount() {
                    return this.filteredStudents.filter(s => s.status === null).length;
                },

                saveAttendance() {
                    if (!this.hasUnsavedChanges) return;

                    this.hasUnsavedChanges = false;
                    this.showToast = true;
                    
                    setTimeout(() => {
                        this.showToast = false;
                    }, 3000);
                }
            }
        }

        lucide.createIcons();

        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', options);
    </script>
</body>
</html>